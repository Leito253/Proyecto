{"ast":null,"code":"import React,{useState}from\"react\";import{GoogleLogin}from\"@react-oauth/google\";import{jwtDecode}from\"jwt-decode\";import\"../Styles/login.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function LoginPage(){const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[mensaje,setMensaje]=useState(\"\");const handleLogin=async e=>{e.preventDefault();const res=await fetch(\"http://localhost:5072/api/Usuarios/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email,password})});if(!res.ok){const error=await res.json();setMensaje(error.mensaje||\"Email o contraseña incorrectos\");return;}const data=await res.json();localStorage.setItem(\"usuario\",JSON.stringify(data.usuario));localStorage.setItem(\"token\",data.token);window.location.href=\"/\";};const handleGoogleLoginSuccess=credentialResponse=>{const decoded=jwtDecode(credentialResponse.credential);localStorage.setItem(\"usuario\",JSON.stringify({nombre:decoded.name,email:decoded.email,imagen:decoded.picture,googleId:decoded.sub}));window.location.href=\"/\";};const handleGoogleLoginError=()=>{alert(\"No se pudo iniciar sesión con Google.\");};return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-box\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Iniciar sesi\\xF3n\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Contrase\\xF1a\",value:password,onChange:e=>setPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Iniciar sesi\\xF3n\"})]}),mensaje&&/*#__PURE__*/_jsx(\"p\",{className:\"mensaje-error\",children:mensaje}),/*#__PURE__*/_jsx(\"h2\",{children:\"o con Google\"}),/*#__PURE__*/_jsx(GoogleLogin,{onSuccess:handleGoogleLoginSuccess,onError:handleGoogleLoginError})]})});}","map":{"version":3,"names":["React","useState","GoogleLogin","jwtDecode","jsx","_jsx","jsxs","_jsxs","LoginPage","email","setEmail","password","setPassword","mensaje","setMensaje","handleLogin","e","preventDefault","res","fetch","method","headers","body","JSON","stringify","ok","error","json","data","localStorage","setItem","usuario","token","window","location","href","handleGoogleLoginSuccess","credentialResponse","decoded","credential","nombre","name","imagen","picture","googleId","sub","handleGoogleLoginError","alert","className","children","onSubmit","type","placeholder","value","onChange","target","required","onSuccess","onError"],"sources":["/mnt/Datos/Repos/Proyecto/Frontend/src/pages/LoginPage.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { GoogleLogin } from \"@react-oauth/google\";\nimport { jwtDecode } from \"jwt-decode\";\nimport \"../Styles/login.css\";\n\nexport default function LoginPage() {\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [mensaje, setMensaje] = useState(\"\");\n\n    const handleLogin = async (e) => {\n        e.preventDefault();\n\n        const res = await fetch(\"http://localhost:5072/api/Usuarios/login\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ email, password })\n        });\n\n        if (!res.ok) {\n            const error = await res.json();\n            setMensaje(error.mensaje || \"Email o contraseña incorrectos\");\n            return;\n        }\n\n        const data = await res.json();\n        localStorage.setItem(\"usuario\", JSON.stringify(data.usuario));\n        localStorage.setItem(\"token\", data.token);\n        window.location.href = \"/\";\n    };\n\n    const handleGoogleLoginSuccess = (credentialResponse) => {\n        const decoded = jwtDecode(credentialResponse.credential);\n\n        localStorage.setItem(\"usuario\", JSON.stringify({\n            nombre: decoded.name,\n            email: decoded.email,\n            imagen: decoded.picture,\n            googleId: decoded.sub\n        }));\n\n        window.location.href = \"/\";\n    };\n\n    const handleGoogleLoginError = () => {\n        alert(\"No se pudo iniciar sesión con Google.\");\n    };\n\n    return (\n        <div className=\"login-container\">\n            <div className=\"login-box\">\n                <h1>Iniciar sesión</h1>\n\n                <form onSubmit={handleLogin}>\n                    <input type=\"email\" placeholder=\"Email\" value={email} onChange={e => setEmail(e.target.value)} required />\n                    <input type=\"password\" placeholder=\"Contraseña\" value={password} onChange={e => setPassword(e.target.value)} required />\n                    <button type=\"submit\">Iniciar sesión</button>\n                </form>\n                {mensaje && <p className=\"mensaje-error\">{mensaje}</p>}\n\n                <h2>o con Google</h2>\n                <GoogleLogin\n                    onSuccess={handleGoogleLoginSuccess}\n                    onError={handleGoogleLoginError}\n                />\n            </div>\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}